(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,r,i){return(r=function(t){var r=function(t){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function i(e){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?r(Object(n),!0).forEach(function(r){t(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const n=["img","video","link","data","title"];function o(e){let{utils:t,BANNER:r,NATIVE:o,VIDEO:s,Renderer:a}=e;const{deepAccess:d,deepClone:l,delayExecution:c,hasNonSerializableProperty:u,mergeDeep:g}=t,p=function(e){let{Renderer:t,BANNER:r,NATIVE:o,VIDEO:s}=e;return{[r]:(e,t)=>{if(!t.hasOwnProperty("ad")&&!t.hasOwnProperty("adUrl")){var r,i;let[e,n]=(null!==(r=t.width)&&void 0!==r?r:t.wratio)<(null!==(i=t.height)&&void 0!==i?i:t.hratio)?[t.width,"repeat-y"]:[t.height,"repeat-x"];e=null==e?"100%":"".concat(e,"px"),t.ad='<html><body><div style="display: inline-block; height: '.concat(null==t.height?"100%":t.height+"px","; width: ").concat(null==t.width?"100%":t.width+"px","; background-image: url(https://vcdn.adnxs.com/p/creative-image/27/c0/52/67/27c05267-5a6d-4874-834e-18e218493c32.png); background-size: ").concat(e,"; background-repeat: ").concat(n,'"></div></body></html>')}},[s]:(e,r)=>{r.hasOwnProperty("vastXml")||r.hasOwnProperty("vastUrl")||(r.vastXml='<?xml version="1.0" encoding="UTF-8"?><VAST version="3.0"><Ad><InLine><AdSystem>GDFP</AdSystem><AdTitle>Demo</AdTitle><Description><![CDATA[Demo]]></Description><Creatives><Creative><Linear ><Duration>00:00:11</Duration><VideoClicks><ClickThrough><![CDATA[https://prebid.org/]]></ClickThrough></VideoClicks><MediaFiles><MediaFile delivery="progressive" width="640" height="360" type="video/mp4" scalable="true" maintainAspectRatio="true"><![CDATA[https://s3.amazonaws.com/files.prebid.org/creatives/PrebidLogo.mp4]]></MediaFile></MediaFiles></Linear></Creative></Creatives></InLine></Ad></VAST>',r.renderer=t.install({url:"https://cdn.jwplayer.com/libraries/l5MchIxB.js"}),r.renderer.setRender(function(e,t){var i;const n=null!==(i=function(e){var t,r,i,n;const o=null===(t=window.googletag)||void 0===t||null===(r=t.pubads)||void 0===r||null===(r=r.call(t))||void 0===r||null===(i=r.getSlots)||void 0===i||null===(i=i.call(r))||void 0===i||null===(n=i.find)||void 0===n?void 0:n.call(i,t=>t.getAdUnitPath()===e||t.getSlotElementId()===e);return null==o?void 0:o.getSlotElementId()}(e.adUnitCode))&&void 0!==i?i:e.adUnitCode,o=t.createElement("div");o.id="".concat(n,"-video-player"),t.getElementById(n).appendChild(o);const s=window.jwplayer(o.id).setup({debug:!0,width:r.width,height:r.height,advertising:{client:"vast",outstream:!0,endstate:"close"}});s.on("ready",async function(){e.vastUrl?s.loadAdTag(e.vastUrl):s.loadAdXml(e.vastXml)})}))},[o]:(e,t)=>{t.hasOwnProperty("native")||(t.native={ortb:{link:{url:"https://www.link.example",clicktrackers:["https://impression.example"]},assets:e.nativeOrtbRequest.assets.map(a)}})}};function a(e){switch(n.find(t=>e.hasOwnProperty(t))){case"img":return i(i({},e),{},{img:{type:3,w:600,h:500,url:"https://vcdn.adnxs.com/p/creative-image/27/c0/52/67/27c05267-5a6d-4874-834e-18e218493c32.png"}});case"video":return i(i({},e),{},{video:{vasttag:'<?xml version="1.0" encoding="UTF-8"?><VAST version="3.0"><Ad><InLine><AdSystem>GDFP</AdSystem><AdTitle>Demo</AdTitle><Description><![CDATA[Demo]]></Description><Creatives><Creative><Linear ><Duration>00:00:11</Duration><VideoClicks><ClickThrough><![CDATA[https://prebid.org/]]></ClickThrough></VideoClicks><MediaFiles><MediaFile delivery="progressive" width="640" height="360" type="video/mp4" scalable="true" maintainAspectRatio="true"><![CDATA[https://s3.amazonaws.com/files.prebid.org/creatives/PrebidLogo.mp4]]></MediaFile></MediaFiles></Linear></Creative></Creatives></InLine></Ad></VAST>'}});case"data":return i(i({},e),{},{data:{value:"5 stars"}});case"title":return i(i({},e),{},{title:{text:"Prebid Native Example"}})}}}({Renderer:a,BANNER:r,NATIVE:o,VIDEO:s});function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};({setTimeout:this.setTimeout=window.setTimeout.bind(window)}=e),this.logger=e.logger,this.rules=[]}return Object.assign(f.prototype,{DEFAULT_RULE_OPTIONS:{delay:0},serializeConfig(e){return e.filter((e,t)=>{const r=!u(e);return r||d(e,"options.suppressWarnings")||this.logger.logWarn("Bid interceptor rule definition #".concat(t+1," contains non-serializable properties and will be lost after a refresh. Rule definition: "),e),r})},updateConfig(e){this.rules=(e.intercept||[]).map((e,t)=>this.rule(e,t+1))},rule(e,t){return{no:t,match:this.matcher(e.when,t),replace:this.replacer(e.then,t),options:Object.assign({},this.DEFAULT_RULE_OPTIONS,e.options),paapi:this.paapiReplacer(e.paapi||[],t)}},matcher(e,t){if("function"==typeof e)return e;if("object"!=typeof e)return this.logger.logError("Invalid 'when' definition for debug bid interceptor (in rule #".concat(t,")")),()=>!1;function r(t,i){let{ref:n=e,args:o=[]}=i;return Object.entries(n).map(e=>{let[i,n]=e;const s=t[i];return n instanceof RegExp?null!=n.exec(s):"function"==typeof n?!!n(s,...o):"object"==typeof n?r(s,{ref:n,args:o}):s===n}).every(e=>e)}return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return r(e,{args:i})}},replacer(e,t){var r=this;if(null===e)return()=>null;let i;return"function"==typeof(e=e||{})?i=t=>{let{args:r}=t;return e(...r)}:"object"!=typeof e?(this.logger.logError("Invalid 'then' definition for debug bid interceptor (in rule #".concat(t,")")),i=()=>({})):i=t=>{let{args:r,ref:n=e}=t;const o=Array.isArray(n)?[]:{};return Object.entries(n).forEach(e=>{let[t,n]=e;o[t]="function"==typeof n?n(...r):null!=n&&"object"==typeof n?i({args:r,ref:n}):n}),o},function(e){const t=r.responseDefaults(e);for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];g(t,i({args:[e,...o]}));const a=p[t.mediaType];return a&&a(e,t),t.isDebug=!0,t}},paapiReplacer(e,t){function r(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(e=>Object.keys(e).some(e=>!["config","igb"].includes(e))?{config:e}:e)}return Array.isArray(e)?()=>r(e):"function"==typeof e?function(){return r(e(...arguments))}:void this.logger.logError("Invalid 'paapi' definition for debug bid interceptor (in rule #".concat(t,")"))},responseDefaults(e){const t={requestId:e.bidId,cpm:3.5764,currency:"EUR",ttl:360,creativeId:"mock-creative-id",netRevenue:!1,meta:{}};var i,n;let o;var a,d;if(e.mediaType||(t.mediaType=null!==(i=Object.keys(null!==(n=e.mediaTypes)&&void 0!==n?n:{})[0])&&void 0!==i?i:r),t.mediaType===r)o=null!==(a=null===(d=e.mediaTypes)||void 0===d||null===(d=d.banner)||void 0===d||null===(d=d.sizes)||void 0===d?void 0:d[0])&&void 0!==a?a:[300,250];else if(t.mediaType===s){var l,c;o=null!==(l=null===(c=e.mediaTypes)||void 0===c||null===(c=c.video)||void 0===c||null===(c=c.playerSize)||void 0===c?void 0:c[0])&&void 0!==l?l:[600,500]}return Array.isArray(o)&&([t.width,t.height]=o),t},match(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return this.rules.find(t=>t.match(e,...r))},matchAll(e,t){const[r,i]=[[],[]];return e.forEach(e=>{const n=this.match(e,t);null!=n?r.push({rule:n,bid:e}):i.push(e)}),[r,i]},intercept(e){let{bids:t,bidRequest:r,addBid:i,addPaapiConfig:n,done:o}=e;null==t&&(t=r.bids);const[s,a]=this.matchAll(t,r);if(s.length>0){const e=c(o,s.length);s.forEach(t=>{const o=t.rule.replace(t.bid,r),s=t.rule.paapi(t.bid,r),a=t.rule.options.delay;this.logger.logMessage("Intercepted bid request (matching rule #".concat(t.rule.no,"), mocking response in ").concat(a,"ms. Request, response, PAAPI configs:"),t.bid,o,s),this.setTimeout(()=>{o&&i(o,t.bid),s.forEach(e=>n(e,t.bid,r)),e()},a)}),r=l(r),t=r.bids=a}else this.setTimeout(o,0);return{bids:t,bidRequest:r}}}),f}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}let a,d;function l(e,t){let{hook:r,logger:i}=t;a=f.bind({overrides:e,logger:i}),r.get("addBidResponse").before(a,5),d=b.bind({overrides:e,logger:i}),r.get("addBidderRequests").before(d,5)}function c(e){let{hook:t}=e;t.get("addBidResponse").getHooks({hook:a}).remove(),t.get("addBidderRequests").getHooks({hook:d}).remove()}function u(e,t,r){return!(!e.bidder||e.bidder===t)||!(!e.adUnitCode||e.adUnitCode===r)}function g(e,t){return Array.isArray(e)&&-1===e.indexOf(t)}function p(e,t,r,i){return Object.keys(e).filter(e=>-1===["adUnitCode","bidder"].indexOf(e)).reduce(function(t,n){return i.logMessage("bidder overrides changed '".concat(t.adUnitCode,"/").concat(t.bidderCode,"' ").concat(r,".").concat(n," from '").concat(t[n],".js' to '").concat(e[n],"'")),t[n]=e[n],t.isDebug=!0,t},t)}function f(e,t,r,i){const{overrides:n,logger:o}=this;g(n.bidders,r.bidderCode)?o.logWarn("bidder '".concat(r.bidderCode,"' excluded from auction by bidder overrides")):(Array.isArray(n.bids)&&n.bids.forEach(function(e){u(e,r.bidderCode,t)||p(e,r,"bidder",o)}),e(t,r,i))}function b(e,t){const{overrides:r,logger:i}=this,n=t.filter(function(e){return!g(r.bidders,e.bidderCode)||(i.logWarn("bidRequest '".concat(e.bidderCode,"' excluded from auction by bidder overrides")),!1)});Array.isArray(r.bidRequests)&&n.forEach(function(e){r.bidRequests.forEach(function(t){e.bids.forEach(function(r){u(t,e.bidderCode,r.adUnitCode)||p(t,r,"bidRequest",i)})})}),e(n)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function v(e){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?h(Object(i),!0).forEach(function(r){t(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}const y=[];let m,w=!1;function O(e,t){let{fromSession:r=!1,config:i,hook:n,logger:o}=t;i.setConfig({debug:!0}),m.updateConfig(e),E(!0),c({hook:n}),l(e,{hook:n,logger:o}),w||(w=!0,o.logMessage("Debug overrides enabled".concat(r?" from session":"")))}function E(e){y.forEach(e=>{let[t,r]=e;t().getHooks({hook:r}).remove()}),e&&y.forEach(e=>{let[t,r]=e;t().before(r)})}function A(e,t){const r=function(){return m.intercept(...arguments)};y.push([e,function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];t(e,r,...n)}])}function C(e){let{DEBUG_KEY:r,config:i,hook:n,createBid:a,logger:d,utils:l,BANNER:u,NATIVE:g,VIDEO:p,Renderer:f}=e;const b=o({utils:l,BANNER:u,NATIVE:g,VIDEO:p,Renderer:f});m=new b({logger:d});const h=function(e){let{createBid:r,utils:i}=e;const{deepClone:n,delayExecution:o}=i;return function(e,i,a,d,l,c){let u,{onResponse:g,onError:p,onBid:f,onFledge:b}=c;const h=o(()=>g(...u),d.length+1);function v(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];u=t,h()}function y(e,t){f({adUnit:t.adUnitCode,bid:Object.assign(r(t),{requestBidder:t.bidder},e)})}if(d=d.map(e=>i({bidRequest:e,addBid:y,addPaapiConfig(e,r,i){b(function(e){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?s(Object(i),!0).forEach(function(r){t(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({adUnitCode:r.adUnitCode,ortb2:i.ortb2,ortb2Imp:r.ortb2Imp},e))},done:h}).bidRequest).filter(e=>e.bids.length>0),d.length>0){const t=new Set;d.forEach(e=>e.bids.forEach(e=>t.add(e.bidId))),(a=n(a)).ad_units.forEach(e=>{e.bids=e.bids.filter(e=>t.has(e.bid_id))}),a.ad_units=a.ad_units.filter(e=>e.bids.length>0),e(a,d,l,{onResponse:v,onError:p,onBid:f})}else v(!0,[])}}({createBid:a,utils:l});A(()=>n.get("processBidderRequests"),function(e){let{utils:t}=e;const{delayExecution:r}=t;return function(e,t,i,n,o,s,a,d){const l=r(d.onCompletion,2);var c;({bids:n,bidRequest:o}=t({bids:n,bidRequest:o,addBid:a(d.onBid),addPaapiConfig:a((e,t)=>d.onPaapi(v({bidId:t.bidId},e))),done:l})),0===n.length?(null===(c=d.onResponse)||void 0===c||c.call(d,{}),l()):e(i,n,o,s,a,v(v({},d),{},{onCompletion:l}))}}({utils:l})),A(()=>n.get("processPBSRequest"),h),function(e){let t,{DEBUG_KEY:r,storage:i,config:n,hook:o,logger:s}=e;try{i=i||window.sessionStorage,t=JSON.parse(i.getItem(r))}catch(e){}t&&O(t,{fromSession:!0,config:n,hook:o,logger:s})}({DEBUG_KEY:r,config:i,hook:n,logger:d}),i.getConfig("debugging",e=>{let{debugging:t}=e;return function(e){let t,{getStorage:r=()=>window.sessionStorage,DEBUG_KEY:i,config:n,hook:o,logger:s,utils:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=e){try{t=r()}catch(e){s.logError("sessionStorage is not available: debugging configuration will not persist on page reload",e)}null!=t&&function(e){let{sessionStorage:t=window.sessionStorage,DEBUG_KEY:r,utils:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{deepClone:n}=i;if(e.enabled){e.intercept&&((e=n(e)).intercept=m.serializeConfig(e.intercept));try{t.setItem(r,JSON.stringify(e))}catch(e){}}else try{t.removeItem(r)}catch(e){}}(e,{sessionStorage:t,DEBUG_KEY:i,utils:a}),e.enabled?O(e,{config:n,hook:o,logger:s}):function(e){let{hook:t,logger:r}=e;m.updateConfig({}),E(!1),c({hook:t}),w&&(w=!1,r.logMessage("Debug overrides disabled"))}({hook:o,logger:s})}}(t,{DEBUG_KEY:r,config:i,hook:n,logger:d,utils:l})},{init:!0})}window._pbjsGlobals.forEach(e=>{window[e]&&!0===window[e]._installDebugging&&(window[e]._installDebugging=C)})})();